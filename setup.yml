---
  - name: Setup ELK VM 
    hosts: elkserver
    remote_user: elkadmin
    become: yes
    tags: elk
    roles:  
      - update 
      - elk
  
  - name: Install heartbeat on ELK VM
    hosts: elkserver
    remote_user: elkadmin
    become: yes
    tags: heartbeat
    roles:
      - heartbeat
  
  - name: Set up Web VMs with dvwa
    hosts: webservers
    remote_user: redadmin
    become: yes
    tags: dvwa
    roles:
      - update
      - dvwa
      
  - name: Install beats on Web VMs
    hosts: webservers
    remote_user: redadmin
    become: yes
    tags: beats
    roles:
      - filebeat
      - auditbeat
      - packetbeat
      - metricbeat
      
